# Source language.
language: java

# Supported JDKs.
jdk:
  - oraclejdk11
  - openjdk11

# Cache Maven stuff.
cache:
  directories:
    - $HOME/.m2

# Execute unit tests.
script:
  - src/etc/travis/run-unit-tests.sh

# Code coverage.
after_success:
  - bash <(curl -s https://codecov.io/bash)

# Deploy artifacts.
jobs:
  include:
    - stage: deploy
      jdk: openjdk11
      if: branch = master and tag is present
      script:
        - src/etc/travis/deploy-artifacts.sh
    - stage: deploy
      jdk: openjdk11
      if: branch = develop
      script:
        - src/etc/travis/deploy-artifacts.sh